import { BrowserManager } from "../BrowserManager";

export async function click(selector: string) {
    const page = await BrowserManager.getPage();
    await page.click(selector);
}

export async function clickWithIndex(selector: string, index: number = 0) {
    const page = await BrowserManager.getPage();
    await page.locator(selector).nth(index).click();
}

export async function rightClick(selector: string) {
    const page = await BrowserManager.getPage();
    await page.click(selector, { button: 'right' });
}

export async function doubleClick(selector: string) {
    const page = await BrowserManager.getPage();
    await page.dblclick(selector);
}

export async function clickWithRetry(selector: string, retries: number = 5, delayMs: number = 1000) {
    const page = await BrowserManager.getPage();
    for (let attempt = 1; attempt <= retries; attempt++) {
        try {
            await page.click(selector);
            return;
        } catch (error) {
            if (attempt === retries) {
                throw error;
            }
            await new Promise(res => setTimeout(res, delayMs));
        }
    }
}
